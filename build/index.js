(()=>{"use strict";const e=window.wp.element,t=window.lodash,o=window.wp.blockEditor,r=window.wp.components,c=window.wp.hooks,n=window.wp.compose,d=window.wp.i18n,a=window.wp.primitives,s=(0,e.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(a.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),i=(0,e.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(a.Path,{d:"M16 10h4c.6 0 1-.4 1-1V5c0-.6-.4-1-1-1h-4c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1zm-8 4H4c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1h4c.6 0 1-.4 1-1v-4c0-.6-.4-1-1-1zm10-2.6L14.5 15l1.1 1.1 1.7-1.7c-.1 1.1-.3 2.3-.9 2.9-.3.3-.7.5-1.3.5h-4.5v1.5H15c.9 0 1.7-.3 2.3-.9 1-1 1.3-2.7 1.4-4l1.8 1.8 1.1-1.1-3.6-3.7zM6.8 9.7c.1-1.1.3-2.3.9-2.9.4-.4.8-.6 1.3-.6h4.5V4.8H9c-.9 0-1.7.3-2.3.9-1 1-1.3 2.7-1.4 4L3.5 8l-1 1L6 12.6 9.5 9l-1-1-1.7 1.7z"})),l=(0,e.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(a.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"}));(0,c.addFilter)("blocks.registerBlockType","to51-handpicked-order/additional-block-settings",((e,o)=>("woocommerce/handpicked-products"===o&&(e.attributes=(0,t.assign)(e.attributes,{orderby:{...e.attributes.orderby,enum:[...e.attributes.orderby.enum,"post__in"]}})),e))),(0,c.addFilter)("editor.BlockEdit","to51-handpicked-order/additional-block-settings",(0,n.createHigherOrderComponent)((t=>c=>{if("woocommerce/handpicked-products"!==c.name)return(0,e.createElement)(t,c);const{attributes:{products:n},setAttributes:a}=c,[w,m]=(0,e.useState)([]),[p,u]=(0,e.useState)(!1);(0,e.useEffect)((()=>{document.addEventListener("mousedown",h),document.addEventListener("mouseup",E)}),[]),(0,e.useEffect)((()=>{m([]),u(!1)}),[n]);let b=!1,g=!1;const h=e=>{"wc-block-grid__product"===e.target.className&&(g=e.target,b=!0)},E=e=>{if(!b||"wc-block-grid__product"!==e.target.className)return;if(e.target.dataset.productId===g.dataset.productId)return g=!1,void(b=!1);const t=e.target.parentNode,o=Array.prototype.indexOf.call(t.childNodes,e.target);t.insertBefore(g,t.childNodes.item(o)),m(Array.from(t.childNodes).map((e=>parseInt(e.dataset.productId)))),g=!1,b=!1};return(0,e.createElement)("div",{className:p?"is-sorting":""},(0,e.createElement)(t,c),(0,e.createElement)(o.BlockControls,null,(0,e.createElement)(r.ToolbarGroup,null,(0,e.createElement)(r.ToolbarButton,{icon:p?s:i,label:p?(0,d.__)("Disable Sorting"):(0,d.__)("Enable Sorting"),onClick:()=>{u(!p)},className:p&&"is-pressed"}),p&&(0,e.createElement)(r.ToolbarButton,{icon:l,label:(0,d.__)("Save Sorted Order"),onClick:()=>{a({products:w,orderby:"post__in"})}}))))})))})();